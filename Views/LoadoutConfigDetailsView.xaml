<UserControl x:Class="ARA.Views.LoadoutConfigDetailsView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
			 xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
			 mc:Ignorable="d"
			 xmlns:pages="clr-namespace:ARA.ViewModels.Pages" 
			 xmlns:controls="clr-namespace:ARA.Controls.CustomControls"
			 xmlns:enums="clr-namespace:ARA.Enums"
			 xmlns:d="http://schemas.microsoft.com/expression/blend/2008" d:DataContext="{d:DesignInstance Type=pages:LoadoutConfigDetailsViewModel}">
	<Grid>
		<Grid.RowDefinitions>
			<RowDefinition Height="40" />
			<RowDefinition Height="12" />
			<RowDefinition Height="*" />
			<RowDefinition Height="12" />
			<RowDefinition Height="40" />
		</Grid.RowDefinitions>

		<Grid Grid.Row="0">
			<Grid.ColumnDefinitions>
				<ColumnDefinition Width="Auto" />
				<ColumnDefinition Width="12" />
				<ColumnDefinition Width="Auto" />
			</Grid.ColumnDefinitions>

			<controls:AraButton Grid.Column="0" Style="{StaticResource PageTitleButton}" Command="{Binding BackCommand}">
				<controls:AraButton.Children>
					<Image Style="{StaticResource ButtonImage}" Source="/Assets/Icons/chevron-left.png" />
				</controls:AraButton.Children>
			</controls:AraButton>
			<TextBlock Grid.Column="2" Style="{StaticResource PageTitle}" Text="{Binding Title}" />
		</Grid>

		<ScrollViewer Grid.Row="2" VerticalScrollBarVisibility="Auto">
			<Grid>
				<Grid.RowDefinitions>
					<RowDefinition Height="Auto" />
					<RowDefinition Height="16" />
					<RowDefinition Height="Auto" />
					<RowDefinition Height="16" />
					<RowDefinition Height="Auto" />
				</Grid.RowDefinitions>

				<!-- Name -->
				<StackPanel Grid.Row="0">
					<Label Style="{StaticResource AraLabel}" Target="{Binding ElementName=NameTextBox}">Name</Label>
					<controls:AraTextBox x:Name="NameTextBox" Text="{Binding LoadoutConfiguration.Name}" PlaceholderText="Name" Style="{StaticResource AraTextBox}" MaxLength="50"/>
				</StackPanel>

				<!-- Zone -->
				<GroupBox Grid.Row="2" Header="Zone" Foreground="White" FontSize="18" Padding="12">
					<Grid>
						<Grid.RowDefinitions>
							<RowDefinition Height="40"/>
							<RowDefinition Height="16"/>
							<RowDefinition Height="Auto"/>
						</Grid.RowDefinitions>

						<controls:AraButton Grid.Row="0" Style="{StaticResource SecondaryButton}">
							<controls:AraButton.Children>
								<Image Style="{StaticResource ButtonImage}" Source="/Assets/Icons/zone.png" />
								<TextBlock Text="Select Zone" Margin="4 0 0 0"/>
							</controls:AraButton.Children>
						</controls:AraButton>
						<Grid Grid.Row="2">
							<Grid.ColumnDefinitions>
								<ColumnDefinition Width="*" />
								<ColumnDefinition Width="8" />
								<ColumnDefinition Width="*" />
								<ColumnDefinition Width="8" />
								<ColumnDefinition Width="*" />
								<ColumnDefinition Width="8" />
								<ColumnDefinition Width="*" />
							</Grid.ColumnDefinitions>

							<StackPanel Grid.Column="0">
								<Label Style="{StaticResource AraLabel}" Target="{Binding ElementName=X}">X</Label>
								<controls:AraTextBox 
									x:Name="X" 
									Text="{Binding LoadoutConfiguration.Coordinates.X}" 
									PlaceholderText="X" Style="{StaticResource AraTextBox}" 
									InputType="{x:Static enums:TextBoxInputType.Number}" 
									MaxLength="10"/>
							</StackPanel>
							<StackPanel Grid.Column="2">
								<Label Style="{StaticResource AraLabel}" Target="{Binding ElementName=Y}">Y</Label>
								<controls:AraTextBox 
									x:Name="Y" 
									Text="{Binding LoadoutConfiguration.Coordinates.Y}" 
									PlaceholderText="Y" Style="{StaticResource AraTextBox}" 
									InputType="{x:Static enums:TextBoxInputType.Number}" 
									MaxLength="10"/>
							</StackPanel>
							<StackPanel Grid.Column="4">
								<Label Style="{StaticResource AraLabel}" Target="{Binding ElementName=ZoneWidth}">Width</Label>
								<controls:AraTextBox 
									x:Name="ZoneWidth" 
									Text="{Binding LoadoutConfiguration.Coordinates.Width}" 
									PlaceholderText="Zone Width" Style="{StaticResource AraTextBox}" 
									InputType="{x:Static enums:TextBoxInputType.Number}" 
									MaxLength="10"/>
							</StackPanel>
							<StackPanel Grid.Column="6">
								<Label Style="{StaticResource AraLabel}" Target="{Binding ElementName=ZoneHeight}">Height</Label>
								<controls:AraTextBox 
									x:Name="ZoneHeight" 
									Text="{Binding LoadoutConfiguration.Coordinates.Height}" 
									PlaceholderText="Zone Height" Style="{StaticResource AraTextBox}" 
									InputType="{x:Static enums:TextBoxInputType.Number}" 
									MaxLength="10"/>
							</StackPanel>
						</Grid>
					</Grid>
				</GroupBox>

				<!-- Items -->
				<GroupBox Grid.Row="4" Header="Items" Foreground="White" FontSize="18" Padding="12">
					<Grid>
						<Grid.RowDefinitions>
							<RowDefinition Height="Auto" />
							<RowDefinition Height="12" />
							<RowDefinition Height="*" />
						</Grid.RowDefinitions>

						<Grid Grid.Row="0">
							<Grid.ColumnDefinitions>
								<ColumnDefinition Width="*"/>
								<ColumnDefinition Width="12"/>
								<ColumnDefinition Width="Auto"/>
							</Grid.ColumnDefinitions>
							<controls:AraComboBox
								x:Name="ItemsComboBox"
								IsEditable="True"
								StaysOpenOnEdit="True"
								IsTextSearchEnabled="False"
								Style="{StaticResource AraComboBox}"
								PlaceholderText="Select Item"
								ItemsSource="{Binding ItemsList}"
								DisplayMemberPath="Name"
								SelectedItem="{Binding SelectedItem, Mode=TwoWay}"/>
							<controls:AraButton Grid.Column="2" Command="{Binding AddItemCommand}">
								<controls:AraButton.Children>
									<Image Style="{StaticResource ButtonImage}" Source="/Assets/Icons/plus.png" />
									<TextBlock Text="Add" Margin="4 0 0 0"/>
								</controls:AraButton.Children>
								<controls:AraButton.Style>
									<Style TargetType="controls:AraButton" BasedOn="{StaticResource SecondaryButton}">
										<Style.Triggers>
											<DataTrigger Binding="{Binding SelectedItem}" Value="{x:Null}">
												<Setter Property="IsEnabled" Value="False" />
											</DataTrigger>
										</Style.Triggers>
									</Style>
								</controls:AraButton.Style>
							</controls:AraButton>
						</Grid>

						<Grid Grid.Row="2">
							<!-- Loadout Items Grid -->
							<Border >
								<Border.Style>
									<Style TargetType="Border" BasedOn="{StaticResource DataGridBorderWrapper}">
										<Style.Triggers>
											<DataTrigger Binding="{Binding SelectedItemsList.Count}" Value="0">
												<Setter Property="Visibility" Value="Hidden"/>
											</DataTrigger>
										</Style.Triggers>
									</Style>
								</Border.Style>
								<DataGrid x:Name="LoadoutPreview" ItemsSource="{Binding SelectedItemsList}">
									<DataGrid.Columns>
										<!-- Icon -->
										<DataGridTemplateColumn Header="Icon" Width="60">
											<DataGridTemplateColumn.CellTemplate>
												<DataTemplate>
													<Image Source="{Binding Path}" Height="48" Stretch="Uniform" VerticalAlignment="Center"/>
												</DataTemplate>
											</DataGridTemplateColumn.CellTemplate>
										</DataGridTemplateColumn>
										<!-- Name -->
										<DataGridTemplateColumn Header="Name" Width="*">
											<DataGridTemplateColumn.CellTemplate>
												<DataTemplate>
													<TextBlock Text="{Binding Name}"/>
												</DataTemplate>
											</DataGridTemplateColumn.CellTemplate>
										</DataGridTemplateColumn>
										<!-- Quantity -->
										<DataGridTemplateColumn Header="Quantity" Width="Auto">
											<DataGridTemplateColumn.CellTemplate>
												<DataTemplate>
													<TextBlock Text="{Binding Quantity}"/>
												</DataTemplate>
											</DataGridTemplateColumn.CellTemplate>
										</DataGridTemplateColumn>
										<!-- Actions -->
										<DataGridTemplateColumn Header="Actions" Width="Auto">
											<DataGridTemplateColumn.CellTemplate>
												<DataTemplate>
													<controls:AraButton 
														Style="{StaticResource PageTitleButton}" 
														Command="{Binding DataContext.RemoveItemCommand, RelativeSource={RelativeSource AncestorType=DataGrid}}"
														CommandParameter="{Binding Id}">
														<controls:AraButton.Children>
															<Image Style="{StaticResource ButtonImage}" Source="/Assets/Icons/DataGrid/Edit.png" />
														</controls:AraButton.Children>
													</controls:AraButton>
												</DataTemplate>
											</DataGridTemplateColumn.CellTemplate>
										</DataGridTemplateColumn>
									</DataGrid.Columns>
								</DataGrid>
							</Border>
							<!-- No Configurations Message -->
							<StackPanel Orientation="Vertical" >
								<StackPanel.Style>
									<Style TargetType="StackPanel">
										<Setter Property="Visibility" Value="Collapsed"/>
										<Style.Triggers>
											<DataTrigger Binding="{Binding SelectedItemsList.Count}" Value="0">
												<Setter Property="Visibility" Value="Visible" />
											</DataTrigger>
										</Style.Triggers>
									</Style>
								</StackPanel.Style>
								<TextBlock Style="{StaticResource DataGridNoItemsMessage}" Text="You don't have any Loadout Items yet."/>
								<TextBlock Style="{StaticResource DataGridNoItemsMessage}" Text="Use the combobox and button [ Add ] to add your first item."/>
							</StackPanel>
						</Grid>
					</Grid>
				</GroupBox>
			</Grid>
		</ScrollViewer>

		<controls:AraButton Grid.Row="4" Command="{Binding SaveLoadoutConfigurationCommand}" HorizontalAlignment="Right" Style="{StaticResource PrimaryButton}">
			<controls:AraButton.Children>
				<TextBlock Text="Save" />
			</controls:AraButton.Children>
		</controls:AraButton>
	</Grid>
</UserControl>
